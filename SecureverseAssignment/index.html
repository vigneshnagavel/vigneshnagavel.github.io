<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etherscan</title>
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;500;700&amp;family=Poppins:wght@100;300;400;500;700&amp;family=Ubuntu:wght@300;500;700&amp;display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="navbar">
            <div>
                <img class="logo" src="https://pbs.twimg.com/profile_images/1527944311718850560/6f8pJAiP_400x400.jpg"
                    alt="logo">
            </div>
            <div>
                <h1>Secureverse Technologies</h1>
            </div>
            <div>
                <a href="#" class="loginbtn">Login</a>
            </div>
        </div>
        <div class="inputdiv">
            <form onsubmit="return false">
                <input type="text" required name="address" id="addressinp" placeholder="Enter the address">
                <button type="submit" onclick=run()>Submit</button>
            </form>
        </div>
        <div class="output">
            <div class="otpdata">
                <p class="primaryp">From:</p>
                <p id="from"></p>
            </div>
            <div class="otpdata">
                <p class="primaryp">To:</p>
                <p id="to"></p>
            </div>
            <div class="otpdata">
                <p class="primaryp">Amount of Transaction:</p>
                <p id="amttrc"></p>
            </div>
            <div class="otpdata">
                <p class="primaryp">Time Stamp:</p>
                <p id="timestp"></p>
            </div>
            <div class="otpdata">
                <p class="primaryp">Hash Transaction:</p>
                <p id="hshtrc"></p>
            </div>
            <div class="otpdata">
                <p class="primaryp">Block Number:</p>
                <p id="block"></p>
            </div>
        </div>
        <div>
            <h2>
                Previouse Transaction
            </h2>
        </div>
        <div class="tablediv">
            <table>
                <thead>
                    <tr>
                        <th>From Wallet</th>
                        <th>To Wallet</th>
                        <th>Amount of Transaction</th>
                        <th>Time Stamp</th>
                        <th>Transaction Hash</th>
                        <th>Block Number</th>
                    </tr>
                </thead>
                <tbody id="insertrow">

                </tbody>
            </table>
        </div>
    </div>
</body>
<script>
    let apikey = "MWEF3Y2K8IKREBZQI2X36DW5BIJAAHAWKZ"
    let addressst = "0xddbd2b932c763ba5b1b7ae3b362eac3e8d40121a"

    function run() {
        let input = document.getElementById("addressinp").value
        if (input === "") {
            alert("Enter Address")
        } else {
            getUser()
        }
    }


    async function getUser() {
        let input = document.getElementById("addressinp").value
        console.log(input)

        let url = "https://api.etherscan.io/api?module=account&action=txlist&address=" + input + "&startblock=0&endblock=99999999&page=1&offset=10&sort=desc&apikey=" + apikey
        // Making an API call (request)
        // and getting the response back
        const response = await fetch(url);

        // Parsing it to JSON format
        const data = await response.json();
        console.log(data);

        if (data.message !== "OK") {
            alert("No transaction Found")
        }
        var d = data.result[0].timeStamp * 1000;
        let crtdate = new Date(d)
        document.getElementById("from").innerHTML = data.result[0].from
        document.getElementById("to").innerHTML = data.result[0].to
        document.getElementById("amttrc").innerHTML = data.result[0].value / (10 ** 18)
        document.getElementById("timestp").innerHTML = crtdate
        document.getElementById("hshtrc").innerHTML = data.result[0].hash
        document.getElementById("block").innerHTML = data.result[0].blockNumber

        tablebody = ""

        for (var i = 1; i < data.result.length; i++) {
            console.log(data.result[0].value)
            d = data.result[i].timeStamp * 1000;
            crtdate = new Date(d)
            console.log(crtdate)
            tablebody = tablebody + "<tr>" +
                "<td>" + data.result[i].from + "</td>" +
                "<td>" + data.result[i].to + "</td>" +
                "<td>" + data.result[i].value / (10 ** 18) + "</td>" +
                "<td>" + crtdate + "</td>" +
                "<td>" + data.result[i].hash + "</td>" +
                "<td>" + data.result[i].blockNumber + "</td>" +

                "</tr>"


        }
        let row = document.getElementById("insertrow").innerHTML = tablebody
    }



</script>

</html>
